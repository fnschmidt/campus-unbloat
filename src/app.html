<!doctype html>
<html lang="en" class="dark">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/png" sizes="32x32" href="%sveltekit.assets%/favicon-32x32.png" />
		<link rel="icon" type="image/png" sizes="16x16" href="%sveltekit.assets%/favicon-16x16.png" />
		<link rel="apple-touch-icon" sizes="180x180" href="%sveltekit.assets%/apple-touch-icon.png" />
		<link rel="manifest" href="%sveltekit.assets%/site.webmanifest" />
		<link rel="mask-icon" href="%sveltekit.assets%/safari-pinned-tab.svg" color="#905bd5" />
		<link rel="shortcut icon" href="%sveltekit.assets%/favicon.ico" />
		<meta name="msapplication-TileColor" content="#2d89ef" />
		<meta name="theme-color" content="" />

		<meta name="viewport" content="width=device-width" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="mobile-web-app-capable" content="yes" />
		<meta name="description" content="CampusDual 2025 Vision" />
		<title>CampusUnbloat</title>
		%sveltekit.head%
	</head>

	<body
		class="select-none touch-manipulation transition-transform"
		style="-webkit-tap-highlight-color: transparent"
		data-sveltekit-preload-data="hover"
		data-theme="custom-crimson"
	>
		<div style="display: contents" class="h-full overflow-hidden">%sveltekit.body%</div>
	</body>

	<script>
		function switchEcDark(htmlElement, state) {
			if (state) {
				htmlElement.classList.add('ec-dark');
			} else {
				htmlElement.classList.remove('ec-dark');
			}
		}

		function setDarkMode(state) {
			const themeColorMeta = document.querySelector('meta[name="theme-color"]');
			const rootElement = document.documentElement;

			switchEcDark(rootElement, state);

			if (state) {
				document.documentElement.classList.add('dark');
				themeColorMeta.setAttribute('content', 'rgb(27,27,27)');
			} else {
				document.documentElement.classList.remove('dark');
				themeColorMeta.setAttribute('content', 'rgb(213,213,217)');
			}
		}

		// Initialize dark mode based on the current preference
		const darkModeMediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
		setDarkMode(darkModeMediaQuery.matches);

		// Listen for changes in the prefers-color-scheme media query
		darkModeMediaQuery.addEventListener('change', (event) => {
			setDarkMode(event.matches);
		});

		document.addEventListener('DOMContentLoaded', function () {
			// reduce initial-scale for iPhone
			if (/iPhone/i.test(navigator.userAgent)) {
				var viewportMeta = document.querySelector('meta[name="viewport"]');
				viewportMeta.content = 'width=device-width, initial-scale=0.9, maximum-scale=0.9';
			}
		});
	</script>
</html>
